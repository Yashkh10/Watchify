<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Genres</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/genrecss.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='movielogo.png') }}" type="image/png">
</head>
<body>
    <header>
        <a href="/" class="logo-link">
            <img src="{{ url_for('static', filename='movielogo.png') }}" alt="Logo" class="logo">
        </a>
        <h1>Movie Genres</h1>
    </header>

    <main>
        <!-- Genre Filter Form -->
        <form method="POST">
            <label class="genre-label">Select Genres:</label>
            <div class="genre-checkboxes">
                {% for genre in genres %}
                    <input type="checkbox" id="{{ genre }}" name="genres" value="{{ genre }}" 
                        {% if genre in selected_genres %}checked{% endif %}>
                    <label for="{{ genre }}">{{ genre }}</label>
                {% endfor %}
            </div>
            <div class="form-container">
                <button type="submit">Filter</button>
            </div>
        </form>

        {% if message %}
            <p class="message">{{ message }}</p>
        {% endif %}

        <!-- Movie List (no checkboxes or submit button) -->
        <div class="genre-list">
            {% if movies %}
                {% for movie in movies %}
                    <div class="movie-container">
                        <img src="{{ movie['poster_url'] }}" alt="{{ movie['title'] }}" class="movie-poster">
                        <p class="movie-title">{{ movie['title'] }}</p>
                    </div>
                {% endfor %}
            {% else %}
                <p>No movies found for this genre.</p>
            {% endif %}
        </div>

        <!-- Pagination -->
        <div class="pagination">
            <form method="GET">
                {% for genre in selected_genres %}
                    <input type="hidden" name="genres" value="{{ genre }}">
                {% endfor %}
                
                {% if page > 1 %}
                    <button type="submit" name="page" value="{{ page - 1 }}">Previous</button>
                {% endif %}
                <span>Page {{ page }} of {{ total_pages }}</span>
                {% if page < total_pages %}
                    <button type="submit" name="page" value="{{ page + 1 }}">Next</button>
                {% endif %}
            </form>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Genre Page</p>
    </footer>
</body>
</html>
